# Shared Android configuration
# ANDROID_PACKAGE_NAME: Complete package name from ENV
# ANDROID_SERVICE_ACCOUNT_PATH: Path to Google Play service account JSON

def env_with_flavor(key)
  flavor = ENV['FLAVOR']
  if flavor && !flavor.empty?
    flavor_key = "#{flavor.upcase}_#{key}"
    return ENV[flavor_key] if ENV[flavor_key] && !ENV[flavor_key].empty?
  end
  ENV[key]
end

package = env_with_flavor('ANDROID_PACKAGE_NAME')
UI.user_error!("‚ùå ANDROID_PACKAGE_NAME is required!") unless package

package_name(package)
json_key_file(env_with_flavor('ANDROID_SERVICE_ACCOUNT_PATH'))
